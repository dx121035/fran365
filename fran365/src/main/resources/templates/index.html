<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
	<meta charset="UTF-8">
	<title>Fran365</title>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">


	<!-- ===============================================-->
	<!--    Favicons-->
	<!-- ===============================================-->
	<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png">
	<link rel="manifest" href="../assets/img/favicons/manifest.json">
	<meta name="msapplication-TileImage" content="../assets/img/favicons/mstile-150x150.png">
	<meta name="theme-color" content="#ffffff">
	<script src="/vendors/imagesloaded/imagesloaded.pkgd.min.js"></script>
	<script src="/vendors/simplebar/simplebar.min.js"></script>
	<script src="/assets/js/config.js"></script>
	<script>
		document.documentElement.classList.add('navbar-horizontal');
	</script>


	<!-- ===============================================-->
	<!--    Stylesheets-->
	<!-- ===============================================-->
	<link href="../vendors/fullcalendar/main.min.css" rel="stylesheet">
    <link href="../vendors/choices/choices.min.css" rel="stylesheet">
    <link href="../vendors/dhtmlx-gantt/dhtmlxgantt.css" rel="stylesheet">
    <link href="../vendors/flatpickr/flatpickr.min.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@300;400;600;700;800;900&amp;display=swap" rel="stylesheet">
    <link href="../vendors/simplebar/simplebar.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.8/css/line.css">
    <link href="../assets/css/theme-rtl.min.css" type="text/css" rel="stylesheet" id="style-rtl">
    <link href="../assets/css/theme.min.css" type="text/css" rel="stylesheet" id="style-default">
    <link href="../assets/css/user-rtl.min.css" type="text/css" rel="stylesheet" id="user-style-rtl">
    <link href="../assets/css/user.min.css" type="text/css" rel="stylesheet" id="user-style-default">
	<script>
		var phoenixIsRTL = window.config.config.phoenixIsRTL;
		if (phoenixIsRTL) {
			var linkDefault = document.getElementById('style-default');
			var userLinkDefault = document.getElementById('user-style-default');
			linkDefault.setAttribute('disabled', true);
			userLinkDefault.setAttribute('disabled', true);
			document.querySelector('html').setAttribute('dir', 'rtl');
		} else {
			var linkRTL = document.getElementById('style-rtl');
			var userLinkRTL = document.getElementById('user-style-rtl');
			linkRTL.setAttribute('disabled', true);
			userLinkRTL.setAttribute('disabled', true);
		}
	</script>
</head>
<body>

<nav class="navbar navbar-vertical navbar-expand-lg">
	<script>
		var navbarStyle = window.config.config.phoenixNavbarStyle;
		if (navbarStyle && navbarStyle !== 'transparent') {
			document.querySelector('body').classList.add(`navbar-${navbarStyle}`);
		}
	</script>

</nav>
<nav class="navbar navbar-top fixed-top navbar-expand-lg" id="navbarTop" style="display:none;">
	<div class="navbar-logo">

		<button class="btn navbar-toggler navbar-toggler-humburger-icon hover-bg-transparent" type="button" data-bs-toggle="collapse" data-bs-target="#navbarTopCollapse" aria-controls="navbarTopCollapse" aria-expanded="false" aria-label="Toggle Navigation"><span class="navbar-toggle-icon"><span class="toggle-line"></span></span></button>
		<a class="navbar-brand me-1 me-sm-3" href="/">
            <div class="d-flex align-items-center">
                <div class="d-flex align-items-center"><img src="/images/logo00.png" width="50" />
                    <div class="d-flex align-items-center"><img src="/images/logo2.png" width="150" />
                       <!-- &lt;!&ndash; <p class="logo-text ms-2 d-none d-sm-block"><img src="/images/logo2.png" width="180" style="margin-left: 10px;" /></p> &ndash;&gt;-->
                    </div>
                </div>
            </a>
        </div>
        <div class="collapse navbar-collapse navbar-top-collapse order-1 order-lg-0 justify-content-center" id="navbarTopCollapse">
            <ul class="navbar-nav navbar-nav-top" data-dropdown-on-hover="data-dropdown-on-hover">
                <li class="nav-item">
                    <a class="nav-link lh-1" href="/board/notice">
                        <span class="uil fs-0 me-2" data-feather="bell"></span>공지사항
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link lh-1" href="/board/list">
                        <span class="uil fs-0 me-2" data-feather="help-circle"></span>Q&A게시판
                    </a>
                </li>
                <li class="nav-item dropdown"><a class="nav-link dropdown-toggle lh-1" href="#!" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-haspopup="true" aria-expanded="false"><span class="uil fs-0 me-2" data-feather="check-square"></span>서류 결재</a>
                    <ul class="dropdown-menu navbar-dropdown-caret">
                        <li><a class="dropdown-item" href="/document/create">
                            <div class="dropdown-item-wrapper"><span class="me-2 uil" data-feather="heart"></span>서류 결재
                            </div>
                        </a>
                        </li>

                        <li><a class="dropdown-item" href="/document/readList">
                            <div class="dropdown-item-wrapper"><span class="me-2 uil" data-feather="heart"></span>서류 결재 목록
                            </div>
                        </a>
                        </li>

                    </ul>
                </li>
                <li class="nav-item dropdown"><a class="nav-link dropdown-toggle lh-1" href="#!" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-haspopup="true" aria-expanded="false"><span class="uil fs-0 me-2" data-feather="share-2"></span>자원공유</a>
                    <ul class="dropdown-menu navbar-dropdown-caret">
                        <li><a class="dropdown-item" href="/resource/readList">
                            <div class="dropdown-item-wrapper"><span class="me-2 uil" data-feather="heart"></span>공유게시판
                            </div>
                        </a>
                        </li>

                        <li><a class="dropdown-item" href="/history/purchaseList">
                            <div class="dropdown-item-wrapper"><span class="me-2 uil" data-feather="heart"></span>구매 목록
                            </div>
                        </a>
                        </li>

                        <li><a class="dropdown-item" href="/history/salesList">
                            <div class="dropdown-item-wrapper"><span class="me-2 uil" data-feather="heart"></span>판매 목록
                            </div>
                        </a>
                        </li>

                    </ul>
                </li>
                <li class="nav-item dropdown"><a class="nav-link dropdown-toggle lh-1" href="#!" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-haspopup="true" aria-expanded="false"><span class="uil fs-0 me-2" data-feather="map-pin"></span>지점현황</a>
                    <ul class="dropdown-menu navbar-dropdown-caret">
                        <li><a class="dropdown-item" href="/brand/create">
                            <div class="dropdown-item-wrapper"><span class="me-2 uil" data-feather="heart"></span>지점 등록
                            </div>
                        </a>
                        </li>
                        <li><a class="dropdown-item" href="/brand/list">
                            <div class="dropdown-item-wrapper"><span class="me-2 uil" data-feather="heart"></span>지점 목록
                            </div>
                        </a>
                        </li>

                    </ul>
                </li>
                <li class="nav-item">
                    <a class="nav-link lh-1" href="/product/readList">
                        <span class="uil fs-0 me-2" data-feather="truck"></span>발주
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link lh-1" href="/social/main">
                        <span class="uil fs-0 me-2" data-feather="users"></span>소셜
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link lh-1" href="/cart/readDetail">
                        <span class="uil fs-0 me-2" data-feather="shopping-cart"></span>장바구니
                    </a>
                </li>


                <li sec:authorize="hasRole('ROLE_ADMIN')" class="nav-item">
                    <a class="nav-link lh-1" href="/admin/main">
                        <span class="uil fs-0 me-2" data-feather="lock"></span>관리자페이지
                    </a>
                </li>
            </ul>
        </div>
        <ul class="navbar-nav navbar-nav-icons flex-row">


            <li class="nav-item dropdown"><a class="nav-link lh-1 pe-0" id="navbarDropdownUser" href="#!" role="button" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-haspopup="true" aria-expanded="false">
                <div class="avatar avatar-l ">
                    <img class="rounded-circle " th:src="@{|${awspath}/${member.image}|}"  alt="" />

                </div>
            </a>
                <div class="dropdown-menu dropdown-menu-end navbar-dropdown-caret py-0 dropdown-profile shadow border border-300" aria-labelledby="navbarDropdownUser">
                    <div class="card position-relative border-0">
                        <div class="card-body p-0">
                            <div class="text-center pt-4 pb-3">
                                <div class="avatar avatar-xl ">
                                    <img class="rounded-circle " th:src="@{|${awspath}/${member.image}|}"  alt="" />

                                </div>
                                <h6 class="mt-2 text-black">[[${member.name}]]</h6>
                            </div>

                        </div>
                        <div class="overflow-auto scrollbar" style="height: 10rem;">
                            <ul class="nav d-flex flex-column mb-2 pb-1">
                                <li class="nav-item"><a class="nav-link px-3" href="/member/readDetail"> <span class="me-2 text-900" data-feather="user"></span><span>프로필</span></a></li>
                                <li class="nav-item"><a class="nav-link px-3" href="/delivery/readList"><span class="me-2 text-900" data-feather="truck"></span>나의 주문내역</a></li>
                            </ul>

                            <div class="px-3"> <a class="btn btn-phoenix-secondary d-flex flex-center w-100" href="/logout"> <span class="me-2" data-feather="log-out"> </span>Sign out</a></div>
                        </div>

                    </div>
                </div>
            </li>
        </ul>
    </nav>
    <script>
        var navbarVertical = document.querySelector('.navbar-vertical');
        navbarVertical.remove();
        navbarTop.removeAttribute('style');
    </script>


</main>

	<main class="alternate-landing" style="--phoenix-scroll-margin-top: 1.2rem;">
		
		<section class="counter-container">
		    <div class="position-absolute start-0 end-0 w-100 counter-overlay" style="transform: skewY(-8deg)"></div>
		    <div class="container-small position-relative">
		        <div class="row gx-0 gy-8 justify-content-center">
		            <div class="col-sm-6 col-md-auto me-md-5 pe-md-5 border-end-md border-dashed text-center order-2 order-md-0">
		                <h1 class="fs-5 fs-lg-7 fw-bolder text-info mb-3"><span data-countup='{"endValue":354542000,"duration":5,"suffix":"원"}'></span></h1>
		                <h4>프랜차이즈 매출</h4>
		            </div>
		            <div class="col-sm-6 col-md-auto me-md-5 pe-md-5 border-end-md border-dashed text-center order-1 order-md-0">
		                <h1 class="fs-5 fs-lg-7 fw-bolder text-info mb-3"><span data-countup='{"endValue":"15","duration":10,"suffix":"개"}'></span></h1>
		                <h4>가맹점</h4>
		            </div>
		            
		            <div class="col-sm-6 col-md-auto me-md-5 pe-md-5 border-dashed text-center">
		                <h1 class="fs-5 fs-lg-7 fw-bolder text-info mb-3" data-countup='{"endValue":32,"duration":10,"suffix":"명"}'></h1>
		                <h4>회원</h4>
		            </div>
		        </div>
		    </div>
		</section>
		

		<div class="container mb-8">

			<div class="container-small px-lg-7 px-xxl-3">
				<div class="text-center mb-6">
					<h2>전국 가맹점 위치</h2>
				</div>
				<div class="row">
					<div class="col-12 mb-10">
						<div id="kmap" style="width: 100%; height: 450px; margin-left: 30px;"></div>
                        
                 <script type="text/javascript"
                                src="//dapi.kakao.com/v2/maps/sdk.js?appkey=9eab04f54e929879b23643109e0c42e1&libraries=services"></script>
                        <script th:inline="javascript">
                            var container = document
                                    .getElementById('kmap'), // 지도를 표시할 div
                                option = {
                                    center : new kakao.maps.LatLng(37,127), // 지도의 중심좌표
                                    level : 13
                                    // 지도의 확대 레벨
                                };
                            var brandList = /*[[${brands}]]*/ [];

                            // 지도를 생성합니다
                            var map = new kakao.maps.Map(container,
                                option);
                            // 주소-좌표 변환 객체를 생성합니다
                            var geocoder = new kakao.maps.services.Geocoder();

                            brandList.forEach( function (brand) {
                                // 주소로 좌표를 검색합니다
                                geocoder.addressSearch(brand.address2, function(result, status) {
                                    // 정상적으로 검색이 완료됐으면
                                    if (status === kakao.maps.services.Status.OK) {
                                        var coords = new kakao.maps.LatLng(
                                            result[0].y,
                                            result[0].x);

                                        // 결과값으로 받은 위치를 마커로 표시합니다
                                        var marker = new kakao.maps.Marker(
                                            {
                                                map : map,
                                                position : coords,
                                            });
                                        var iwContent = '<div style="padding: 10px; font-family: Arial, sans-serif; color: #008080;">지점명: <strong style="color: red; font-weight: bold;">' + brand.title + '</strong></div>' +
                                            '<div style="padding: 5px 0; white-space: nowrap; font-family: Arial, sans-serif; color: #777;">전화번호: ' + brand.tel + '</div>';
                                        iwRemoveable = true;

                                        // 인포윈도우로 장소에 대한 설명을 표시합니다
                                        var infowindow = new kakao.maps.InfoWindow(
                                            {
                                                content : iwContent
                                            });
                                        // 마커에 마우스오버 이벤트를 등록합니다
                                        kakao.maps.event.addListener
                                        (marker,'mouseover',function() {// 마커에 마우스오버 이벤트가 발생하면 인포윈도우를 마커위에 표시합니다
                                            infowindow.open(map,marker);
                                        });
                                        // 마커에 마우스아웃 이벤트를 등록합니다
                                        kakao.maps.event
                                            .addListener(
                                                marker,
                                                'mouseout',
                                                function() {
                                                    // 마커에 마우스아웃 이벤트가 발생하면 인포윈도우를 제거합니다
                                                    infowindow
                                                        .close();
                                                });

                                        // 지도의 중심을 결과값으로 받은 위치로 이동시킵니다
                                       // map.setCenter(coords);
                                    }
                                });
                            });

                        </script>
					</div>
				</div>

			</div>
		</div>
		
		<div class="container">
			<div class="container-small pb-8 px-lg-7 px-xxl-3">
				<div class="text-center mb-6">
					<h2>본사 주요 일정</h2>
				</div>
        
        <div class="mx-n4 px-4 mx-lg-n6 px-lg-6 border-y border-200">
          <div class="row py-3 gy-3 gx-0">
            <div class="col-6 col-md-4 order-1 d-flex align-items-center">
              <button class="btn btn-sm btn-phoenix-primary px-4" data-event="today">오늘</button>
            </div>
            <div class="col-12 col-md-4 order-md-1 d-flex align-items-center justify-content-center">
              <button class="btn icon-item icon-item-sm shadow-none text-1100 p-0" type="button" data-event="prev" title="Previous"><span class="fas fa-chevron-left"></span></button>
              <h3 class="px-3 text-1100 fw-semi-bold calendar-title mb-0"> </h3>
              <button class="btn icon-item icon-item-sm shadow-none text-1100 p-0" type="button" data-event="next" title="Next"><span class="fas fa-chevron-right"></span></button>
            </div>
            <div class="col-6 col-md-4 ms-auto order-1 d-flex justify-content-end">
              <div>
                <div class="btn-group btn-group-sm" role="group">
                  <button class="btn btn-phoenix-secondary active-view" data-fc-view="dayGridMonth">월</button>
                  <button class="btn btn-phoenix-secondary" data-fc-view="timeGridWeek">주</button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="calendar-outline mt-6 mb-9" id="appCalendar"></div>
        </div>
		</div>
		<div th:fragment="footer">
		    <footer class="footer position-absolute">
		        <div class="row g-0 justify-content-between align-items-center h-100">
		            <div class="col-12 col-sm-auto text-left">
		                <p class="mb-0 mt-2 text-900" style="font-size:18px;"><span style="font-weight: bold;">Fran365</span><span class="d-none d-sm-inline-block"></span>&nbsp;&nbsp;<span class="mb-0 mt-2 text-700" style="font-size: 14px;">프랜차이즈 RPA(업무자동화) 솔루션</span>
		                <p>&copy;<a class="mx-1" href="https://themewagon.com" style="font-size: 14px;">Fran365 Co., Ltd. All rights reserved.</a></p>
		            </div>
		            <div class="col-12 col-sm-auto text-center">
		                <p class="mb-0 text-600">v1.13.0</p>
		            </div>
		        </div>
		    </footer>
		</div>
      
      <div class="modal fade" id="eventDetailsModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content border"></div>
        </div>
      </div>
      <div class="modal fade" id="addEventModal" tabindex="-1">
        <div class="modal-dialog">
          <div class="modal-content border">
            <form action="/event/create" method="post">
              <div class="modal-header px-card border-0">
                <div class="w-100 d-flex justify-content-between align-items-start">
                  <div>
                    <h5 class="mb-0 lh-sm text-1000">일정 등록하기</h5>
                    <div class="mt-2">
                    </div>
                  </div>
                </div>
              </div>
              <div class="modal-body p-card py-0">
                <div class="form-floating mb-3">
                  <input class="form-control" id="eventTitle" type="text" name="title" required="required" placeholder="Event title" />
                  <label for="eventTitle">제목</label>
                </div>
                <div class="flatpickr-input-container mb-3">
                  <div class="form-floating">
                    <input class="form-control datetimepicker" id="eventStartDate" type="text" name="startDate" placeholder="yyyy/mm/dd" data-options='{"disableMobile":true,"enableTime":"true","dateFormat":"Y-m-d"}' /><span class="uil uil-calendar-alt flatpickr-icon text-700"></span>
                    <label class="ps-6" for="eventStartDate">날짜</label>
                  </div>
                </div>
                <div class="form-floating my-5">
                  <textarea class="form-control" id="eventDescription" placeholder="Leave a comment here" name="description" style="height: 128px"></textarea>
                  <label for="eventDescription">내용</label>
                </div>
                
              </div>
              <div class="modal-footer d-flex justify-content-between align-items-center border-0">
                <button class="btn btn-primary px-4" type="submit">등록</button>
              </div>
            </form>
          </div>
        </div>
      </div>


	<!-- ===============================================-->
	<!--    JavaScripts-->
	<!-- ===============================================-->

	<script src="/vendors/bigpicture/BigPicture.js"></script>
	<script src="/vendors/lottie/lottie.min.js"></script>
	<script src="/vendors/countup/countUp.umd.js"></script>

<script src="/vendors/popper/popper.min.js"></script>
<script src="/vendors/bootstrap/bootstrap.min.js"></script>
<script src="/vendors/anchorjs/anchor.min.js"></script>
<script src="/vendors/is/is.min.js"></script>
<script src="/vendors/fontawesome/all.min.js"></script>
<script src="/vendors/lodash/lodash.min.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=window.scroll"></script>
<script src="/vendors/list.js/list.min.js"></script>
<script src="/vendors/feather-icons/feather.min.js"></script>
<script src="/vendors/dayjs/dayjs.min.js"></script>
<script src="/assets/js/phoenix.js"></script>
<script src="/vendors/echarts/echarts.min.js"></script>
<script src="/vendors/leaflet/leaflet.js"></script>
<script src="/vendors/leaflet.markercluster/leaflet.markercluster.js"></script>
<script src="/vendors/leaflet.tilelayer.colorfilter/leaflet-tilelayer-colorfilter.min.js"></script>
<script src="/assets/js/ecommerce-dashboard.js"></script>
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script src="../vendors/fullcalendar/main.js"></script>

<script th:inline="javascript">
(function (factory) {
  typeof define === 'function' && define.amd ? define(factory) :
  factory();
})((function () { 'use strict';

  /* -------------------------------------------------------------------------- */

  const camelize = str => {
    const text = str.replace(/[-_\s.]+(.)?/g, (_, c) =>
      c ? c.toUpperCase() : ''
    );
    return `${text.substr(0, 1).toLowerCase()}${text.substr(1)}`;
  };

  const getData = (el, data) => {
    try {
      return JSON.parse(el.dataset[camelize(data)]);
    } catch (e) {
      return el.dataset[camelize(data)];
    }
  };

  /* -------------------------------------------------------------------------- */
  /*                                   Calendar                                 */

  /* -------------------------------------------------------------------------- */
  const renderCalendar = (el, option) => {
    const { merge } = window._;

    const options = merge(
      {
        initialView: 'dayGridMonth',
        editable: true,
        direction: document.querySelector('html').getAttribute('dir'),
        headerToolbar: {
          left: 'prev,next today',
          center: 'title',
          right: 'dayGridMonth,timeGridWeek,timeGridDay'
        },
        buttonText: {
          month: 'Month',
          week: 'Week',
          day: 'Day'
        }
      },
      option
    );
    const calendar = new window.FullCalendar.Calendar(el, options);
    calendar.render();
    document
      .querySelector('.navbar-vertical-toggle')
      ?.addEventListener('navbar.vertical.toggle', () => calendar.updateSize());
    return calendar;
  };

  const fullCalendarInit = () => {
    const { getData } = window.phoenix.utils;

    const calendars = document.querySelectorAll('[data-calendar]');
    calendars.forEach(item => {
      const options = getData(item, 'calendar');
      renderCalendar(item, options);
    });
  };

  const fullCalendar = {
    renderCalendar,
    fullCalendarInit
  };

  const { dayjs } = window;
  const currentDay = dayjs && dayjs().format('DD');
  const currentMonth = dayjs && dayjs().format('MM');
  const prevMonth = dayjs && dayjs().subtract(1, 'month').format('MM');
  const nextMonth = dayjs && dayjs().add(1, 'month').format('MM');
  const currentYear = dayjs && dayjs().format('YYYY');
  const eventList = /*[[${events}]]*/ [];
  const events = [];

	eventList.forEach(function (event) {
	    events.push({
	        title: event.title,
	        start: event.startDate,
	        description: event.description,
	        id: event.id,
	        className: 'text-info'
	    });
	});
	
  const getTemplate = event => `
<div class="modal-header ps-card border-bottom">
  <div>
    <h4 class="modal-title text-1000 mb-0">${event.title}</h4>
    ${
      event.extendedProps.organizer
        ? `<p class="mb-0 fs--1 mt-1">
        by <a href="#!">${event.extendedProps.organizer}</a>
      </p>`
        : ''
    }
  </div>
  <button type="button" class="btn p-1 fw-bolder" data-bs-dismiss="modal" aria-label="Close">
    <span class='fas fa-times fs-0'></span>
  </button>

</div>

<div class="modal-body px-card pb-card pt-1 fs--1">
  ${
    event.extendedProps.description
      ? `
      <div class="mt-3 border-bottom pb-3">
        <h5 class='mb-0 text-800'>내용</h5>
        <p class="mb-0 mt-2">
          ${event.extendedProps.description.split(' ').slice(0, 30).join(' ')}
        </p>
      </div>
    `
      : ''
  } 
  <div class="mt-4 ${event.extendedProps.location ? 'border-bottom pb-3' : ''}">
    <h5 class='mb-0 text-800'>시간</h5>
    <p class="mb-1 mt-2">
    ${
      window.dayjs &&
      window.dayjs(event.start).format('dddd, MMMM D, YYYY, h:mm A')
    } 
    ${
      event.end
        ? `– ${
            window.dayjs &&
            window
              .dayjs(event.end)
              .subtract(1, 'day')
              .format('dddd, MMMM D, YYYY, h:mm A')
          }`
        : ''
    }
  </p>

  </div>
  ${
    event.extendedProps.location
      ? `
        <div class="mt-4 ">
          <h5 class='mb-0 text-800'>Location</h5>
          <p class="mb-0 mt-2">${event.extendedProps.location}</p>
        </div>
      `
      : ''
  }
  ${
    event.schedules
      ? `
      <div class="mt-3">
        <h5 class='mb-0 text-800'>Schedule</h5>
        <ul class="list-unstyled timeline mt-2 mb-0">
          ${event.schedules
            .map(schedule => `<li>${schedule.title}</li>`)
            .join('')}
        </ul>
      </div>
      `
      : ''
  }
  </div>
</div>

<div class="modal-footer d-flex justify-content-end px-card pt-0 border-top-0">
  
  <a href='#!' class="btn btn-primary btn-sm">
    상세보기
    <span class="fas fa-angle-right fs--2 ml-1"></span>
  </a>
</div>
`;

  /*-----------------------------------------------
  |   Calendar
  -----------------------------------------------*/
  const appCalendarInit = () => {
    const Selectors = {
      ACTIVE: '.active',
      ADD_EVENT_FORM: '#addEventForm',
      ADD_EVENT_MODAL: '#addEventModal',
      CALENDAR: '#appCalendar',
      CALENDAR_TITLE: '.calendar-title',
      CALENDAR_DAY: '.calendar-day',
      CALENDAR_DATE: '.calendar-date',
      DATA_CALENDAR_VIEW: '[data-fc-view]',
      DATA_EVENT: 'data-event',
      DATA_VIEW_TITLE: '[data-view-title]',
      EVENT_DETAILS_MODAL: '#eventDetailsModal',
      EVENT_DETAILS_MODAL_CONTENT: '#eventDetailsModal .modal-content',
      EVENT_START_DATE: '#addEventModal [name="startDate"]',
      INPUT_TITLE: '[name="title"]'
    };

    const Events = {
      CLICK: 'click',
      SHOWN_BS_MODAL: 'shown.bs.modal',
      SUBMIT: 'submit'
    };

    const DataKeys = {
      EVENT: 'event',
      FC_VIEW: 'fc-view'
    };

    const eventList = events.reduce(
      (acc, val) =>
        val.schedules ? acc.concat(val.schedules.concat(val)) : acc.concat(val),
      []
    );

    const updateDay = day => {
      const days = [
        '일요일',
        '월요일',
        '화요일',
        '수요일',
        '목요일',
        '금요일',
        '토요일'
      ];
      return days[day];
    };

    const setCurrentDate = () => {
      const dateObj = new Date();
      const month = dateObj.toLocaleString('en-US', { month: 'short' });
      const date = dateObj.getDate(); // return date number
      const day = dateObj.getDay(); // return week day number
      const year = dateObj.getFullYear();
      const newdate = `${date}  ${month},  ${year}`;
      if (document.querySelector(Selectors.CALENDAR_DAY)) {
        document.querySelector(Selectors.CALENDAR_DAY).textContent =
          updateDay(day);
      }
      if (document.querySelector(Selectors.CALENDAR_DATE)) {
        document.querySelector(Selectors.CALENDAR_DATE).textContent = newdate;
      }
    };
    setCurrentDate();

    const updateTitle = currentData => {
      const { currentViewType } = currentData;
      // week view
      if (currentViewType === 'timeGridWeek') {
        const weekStartsDate = currentData.dateProfile.currentRange.start;
        const startingMonth = weekStartsDate.toLocaleString('en-US', {
          month: 'short'
        });
        const startingDate = weekStartsDate.getDate();
        const weekEndDate = currentData.dateProfile.currentRange.end;

        const endingMonth = weekEndDate.toLocaleString('en-US', {
          month: 'short'
        });
        const endingDate = weekEndDate.getDate();

        document.querySelector(
          Selectors.CALENDAR_TITLE
        ).textContent = `${startingMonth} ${startingDate} - ${endingMonth} ${endingDate}`;
      } else
        document.querySelector(Selectors.CALENDAR_TITLE).textContent =
          currentData.viewTitle;
    };

    const appCalendar = document.querySelector(Selectors.CALENDAR);
    const addEventForm = document.querySelector(Selectors.ADD_EVENT_FORM);
    const addEventModal = document.querySelector(Selectors.ADD_EVENT_MODAL);
    const eventDetailsModal = document.querySelector(
      Selectors.EVENT_DETAILS_MODAL
    );

    if (appCalendar) {
      const calendar = fullCalendar.renderCalendar(appCalendar, {
        headerToolbar: false,
        dayMaxEvents: 3,
        height: 800,
        stickyHeaderDates: false,
        views: {
          week: {
            eventLimit: 3
          }
        },
        eventTimeFormat: {
          hour: 'numeric',
          minute: '2-digit',
          omitZeroMinute: true,
          meridiem: true
        },
        events: eventList,
        eventClick: info => {
          if (info.event.url) {
            window.open(info.event.url, '_blank');
            info.jsEvent.preventDefault();
          } else {
            const template = getTemplate(info.event);
            document.querySelector(
              Selectors.EVENT_DETAILS_MODAL_CONTENT
            ).innerHTML = template;
            const modal = new window.bootstrap.Modal(eventDetailsModal);
            modal.show();
          }
        },
        dateClick(info) {
          const modal = new window.bootstrap.Modal(addEventModal);
          modal.show();
          /* eslint-disable-next-line */
          const flatpickr = document.querySelector(Selectors.EVENT_START_DATE)._flatpickr;
          flatpickr.setDate([info.dateStr]);
        }
      });

      updateTitle(calendar.currentData);

      document.addEventListener('click', e => {
        // handle prev and next button click
        if (
          e.target.hasAttribute(Selectors.DATA_EVENT) ||
          e.target.parentNode.hasAttribute(Selectors.DATA_EVENT)
        ) {
          const el = e.target.hasAttribute(Selectors.DATA_EVENT)
            ? e.target
            : e.target.parentNode;
          const type = getData(el, DataKeys.EVENT);
          switch (type) {
            case 'prev':
              calendar.prev();
              updateTitle(calendar.currentData);
              break;
            case 'next':
              calendar.next();
              updateTitle(calendar.currentData);
              break;
            case 'today':
              calendar.today();
              updateTitle(calendar.currentData);
              break;
            default:
              calendar.today();
              updateTitle(calendar.currentData);
              break;
          }
        }

        // handle fc-view
        if (e.target.hasAttribute('data-fc-view')) {
          const el = e.target;
          calendar.changeView(getData(el, DataKeys.FC_VIEW));
          updateTitle(calendar.currentData);
          document
            .querySelectorAll(Selectors.DATA_CALENDAR_VIEW)
            .forEach(item => {
              if (item === e.target) {
                item.classList.add('active-view');
              } else {
                item.classList.remove('active-view');
              }
            });
        }
      });

      if (addEventForm) {
        addEventForm.addEventListener(Events.SUBMIT, e => {
          e.preventDefault();
          const { title, startDate, endDate, label, description, allDay } =
            e.target;
          calendar.addEvent({
            title: title.value,
            start: startDate.value,
            end: endDate.value ? endDate.value : null,
            allDay: allDay.checked,
            className: `text-${label.value}`,
            description: description.value
          });
          e.target.reset();
          window.bootstrap.Modal.getInstance(addEventModal).hide();
        });
      }

      if (addEventModal) {
        addEventModal.addEventListener(
          Events.SHOWN_BS_MODAL,
          ({ currentTarget }) => {
            currentTarget.querySelector(Selectors.INPUT_TITLE)?.focus();
          }
        );
      }
    }
  };

  const { docReady } = window.phoenix.utils;

  docReady(appCalendarInit);

}));
</script>

</body>
</html>